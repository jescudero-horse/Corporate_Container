<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%- title%></title>
    <!--INCLUDE THE HEADER-->
    <%- include('partials/head.ejs') %>
        <script src="/script/library/bestPractise.js"></script>
        <script src="/script/library/information.js"></script>
</head>

<body>
    <!--MODAL-->
    <%- include('partials/modal.ejs') %>

        <!--INCLUDE THE NAVIGATION PANEL-->
        <%- include('partials/navigation.ejs') %>

            <!--INCLUDE THE FILTERS FOR THE BEST PRACTISE-->
            <%- include('partials/filters_bestPractise.ejs') %>

                <div class="container">
                    <h1 id="title"><%-title %></h1>

                    <input type="text" id="ipn" disabled hidden>

                    <!--SEARCH BAR COMPONENT-->
                    <%- include('partials/searchBar.ejs') %>

                        <br>

                        <button id="filterButton" class=" btn btn-primary" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
                            Filters <i class="bi bi-funnel"></i>
                        </button><br><br>

                        <!--BEST PRACTISE DATATABLE-->
                        <%- include('partials/dataTableBestPractise.ejs') %>
                </div>

                <!--FOOTER-->
                <%- include('partials/footer.ejs') %>
</body>

<script>
    //Creamos una variable que contenga los pasos para Horsito
    const tourSteps = [
        {
            element: '#title',
            popover: {
                title: "The Best Practise",
                description: "Within this category, you will be able to view information about best practices from other factories.",
                position: "auto"
            }
        },
        {
            element: '#searchBar_bestPractise',
            popover: {
                title: "Search bar",
                description: "You can use the search bar to look for a best practice, as well as filter the best practices created by email or IPN.",
                position: "auto"
            },
            onNext: () => {
                //Creamos una insancia del botón de los filtros
                const filterButton = document.querySelector('#filterButton');

                //En caso de que exista
                if (filterButton) {
                    //Hacemos clic sobre el
                    filterButton.click();
                }

                //Añadimos un timeOut
                setTimeout(() => {
                }, 5000);
            }
        },
        {
            element: '#filterButton',
            popover: {
                title: "Filter",
                description: "By clicking on this button, you can filter the best practices by factory, category, tags, and more.",
                position: "auto"
            }
        },
        {
            element: '#labelFactories',
            popover: {
                title: 'Factory filters',
                description: "Within this container are the different factories by which you can filter the best practices. You should select one or more factories by which you want to filter.",
                position: "auto"
            }
        },
        {
            element: '#categorizationLabel',
            popover: {
                title: "Categorization filter",
                description: "Here you can filter the best practices by 'Good idea', 'Best practice', and/or 'Techno brick'.",
                position: "auto"
            }
        },
        // {
        //     element: "#tags-label",
        //     popover: {
        //         element: "Tags filter",
        //         description: "Using the tags field, you can filter best practices by keywords. To do this, you need to enter a word and then click Enter.",
        //         position: "auto"
        //     }
        // },
        {
            element: '#categories_Label',
            popover: {
                title: "Categories filter",
                description: "Here you can filter best practices by the categories they are associated with. Multiple categories can be selected.",
                position: "auto"
            }
        },
        {
            element: "#applyFilters",
            popover: {
                title: "Apply filters",
                description: "Once you have selected all the desired filters, you need to click on the apply filters button (green button).",
                position: "auto"
            }
        },
        {
            element: '#clearFiltersButton',
            popover: {
                title: "Clear filters",
                description: "By clicking on this button (red), all filters will be cleared and the page will be reloaded.",
                position: "auto"
            },
            onNext: () => {
                //Ocultamos el panel de los filtros
                document.querySelector('#cerrarPanelFiltros').click();

                setTimeout(() => {
                }, 5000);
            }
        },
        {
            element: '#cardContainer',
            popover: {
                title: "Best practise container",
                description: "Here you can view the best practices in the form of cards. Each card contains a main image, the title of the best practice, the email of the creator of the best practice record, and a button to view more detailed information.",
                position: "top"
            }
        }
    ];
</script>

</html>